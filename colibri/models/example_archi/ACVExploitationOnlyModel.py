from colibri.core.templates.inputs import Inputs
from colibri.core.model import Model
from colibri.core.templates.parameters import Parameters
from colibri.core.templates.outputs import Outputs
from colibri.core.variables.field import Field
from colibri.core.variables.variable import Variable
from colibri.utils.enums_utils import (Roles,Units)

# M1a
class ACVExploitationOnlyModel(Model):

    def __init__(self, name: str):
        self.name = name
        super(ACVExploitationOnlyModel, self).__init__(name)

        self.Qconsumed = self.field("Qconsumed", {}, role=Roles.INPUTS, unit=Units.WATT_HOUR)
        self.CO2Impact = self.field("CO2Impact", 0.0, role=Roles.OUTPUTS, unit=Units.KILO_GRAM)

    def initialize(self):
        pass

    def check_units(self) -> None:
        pass

    def run(self, time_step: int = 0, n_iteration: int = 0) -> None:
        pass

    def simulation_done(self, time_step: int = 0):
        kgCO2perEleckWh = 76 / 1000

        self.CO2Impact = 0

        for k,v in self.Qconsumed.items():
            self.CO2Impact += kgCO2perEleckWh * v

        self.print_outputs()

    def iteration_done(self, time_step: int = 0):
        pass

    def timestep_done(self, time_step: int = 0):
        pass

